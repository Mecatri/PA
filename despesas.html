<!DOCTYPE html>
<html lang="pt-BR">
<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>Controle de Gastos - Casamento ğŸ’</title>
Â  <style>
Â  Â  /* ğŸ› ï¸ CORREÃ‡ÃƒO DE TRANSPARÃŠNCIA E CORES */
Â  Â  :root {
Â  Â  Â  --cor-principal: #8B4513; /* Marrom RÃºstico */
Â  Â  Â  --cor-secundaria: #F0E68C; /* Dourado Suave */
Â  Â  Â  --fundo-claro: #FFF8DC; /* Creme */
Â  Â  Â  /* Usando RGBA para transparÃªncia (Branco com 70% de opacidade) */
Â  Â  Â  --fundo-escuro: rgba(255, 255, 255, 0.7); 
Â  Â  Â  --sombra: 0 4px 8px rgba(0,0,0,0.1);
Â  Â  }

Â  Â  body {
Â  Â  Â  font-family: 'Arial', sans-serif;
Â  Â  Â  background-color: var(--fundo-claro);
Â  Â  Â  color: #333;
Â  Â  Â  margin: 0;
Â  Â  Â  padding: 0;
Â  Â  Â  background-image: url('https://recreio.com.br/wp-content/uploads/disney/carl_e_ellie.jpg'); 
Â  Â  Â  background-size: cover;
Â  Â  Â  background-attachment: fixed;
Â  Â  Â  background-position: center;
Â  Â  Â  padding-top: 20px;
Â  Â  }

Â  Â  .container {
Â  Â  Â  max-width: 90%;
Â  Â  Â  margin: 0 auto;
Â  Â  Â  /* Fundo do container ligeiramente transparente para mostrar o fundo */
Â  Â  Â  background-color: rgba(255, 255, 255, 0.85); 
Â  Â  Â  padding: 20px;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  box-shadow: var(--sombra);
Â  Â  }

Â  Â  h1, h2 {
Â  Â  Â  text-align: center;
Â  Â  Â  color: var(--cor-principal);
Â  Â  Â  border-bottom: 2px solid var(--cor-secundaria);
Â  Â  Â  padding-bottom: 10px;
Â  Â  Â  margin-bottom: 20px;
Â  Â  }

Â  Â  .resumo {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 10px;
Â  Â  Â  margin-bottom: 20px;
Â  Â  }

Â  Â  .total-box {
Â  Â  Â  /* Aplica a nova cor transparente */
Â  Â  Â  background-color: var(--fundo-escuro); 
Â  Â  Â  padding: 15px;
Â  Â  Â  border-radius: 5px;
Â  Â  Â  box-shadow: var(--sombra);
Â  Â  Â  text-align: center;
Â  Â  Â  font-size: 1.1em;
Â  Â  Â  font-weight: bold;
Â  Â  }

Â  Â  .total-box strong {
Â  Â  Â  display: block;
Â  Â  Â  font-size: 1.4em;
Â  Â  Â  margin-top: 5px;
Â  Â  }

Â  Â  /* Cores de Texto */
Â  Â  .total-gasto-noivo strong { color: #007bff; }
Â  Â  .total-gasto-noiva strong { color: #e83e8c; }
Â  Â  .total-apagar-noivo strong { color: #0056b3; }
Â  Â  .total-apagar-noiva strong { color: #c2185b; }
Â  Â  .total-geral strong { color: var(--cor-principal); } 
Â  Â  .total-diferenca.positivo strong { color: #28a745; } 
Â  Â  .total-diferenca.negativo strong { color: #dc3545; } 


Â  Â  .total-planejado {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  }

Â  Â  #btn-editar-orcamento {
Â  Â  Â  background-color: var(--cor-principal);
Â  Â  Â  color: white;
Â  Â  Â  border: none;
Â  Â  Â  padding: 5px 10px;
Â  Â  Â  border-radius: 5px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-size: 0.8em;
Â  Â  Â  margin-left: 10px;
Â  Â  }

Â  Â  #form-gasto {
Â  Â  Â  display: grid;
Â  Â  Â  /* Novo layout para 5 campos + botÃ£o */
Â  Â  Â  grid-template-columns: repeat(3, 1fr) 1fr 1fr 0.7fr; 
Â  Â  Â  gap: 10px;
Â  Â  Â  /* Aplica a nova cor transparente */
Â  Â  Â  background-color: var(--fundo-escuro); 
Â  Â  Â  border-radius: 5px;
Â  Â  Â  margin-bottom: 20px;
Â  Â  }
    /* Ajusta o layout do formulÃ¡rio para telas menores */
    @media (max-width: 600px) {
        #form-gasto {
             grid-template-columns: 1fr 1fr;
        }
        #form-gasto button {
            grid-column: 1 / 3;
        }
    }
    

Â  Â  #form-gasto input, #form-gasto select, #form-gasto button {
Â  Â  Â  padding: 8px;
Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  border-radius: 4px;
Â  Â  }

Â  Â  #form-gasto button {
Â  Â  Â  background-color: var(--cor-principal);
Â  Â  Â  color: white;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-weight: bold;
Â  Â  }

Â  Â  .tabela-container {
Â  Â  Â  overflow-x: auto;
Â  Â  }

Â  Â  #tabela-gastos {
Â  Â  Â  width: 100%;
Â  Â  Â  border-collapse: collapse;
Â  Â  Â  text-align: left;
Â  Â  Â  min-width: 650px; /* Aumenta a largura mÃ­nima devido Ã  nova coluna */
Â  Â  }

Â  Â  #tabela-gastos th, #tabela-gastos td {
Â  Â  Â  padding: 8px 10px;
Â  Â  Â  border: 1px solid #ddd;
Â  Â  }

Â  Â  #tabela-gastos th {
Â  Â  Â  background-color: var(--cor-principal);
Â  Â  Â  color: white;
Â  Â  }
    
    /* Linhas da tabela com transparÃªncia para alternÃ¢ncia de cores */
    #tabela-gastos tbody tr:nth-child(even) {
        background-color: rgba(255, 255, 255, 0.5); 
    }
    #tabela-gastos tbody tr:nth-child(odd) {
        background-color: rgba(255, 255, 255, 0.8);
    }

    /* ğŸš¨ ESTILOS DE ALERTA */
    /* Alerta Amarelo/Laranja (Menos de 7 dias) */
    .alerta-amarelo td {
        background-color: rgba(255, 193, 7, 0.8) !important; 
    }
    /* Alerta Vermelho (Atrasado) */
    .alerta-vermelho td {
        background-color: rgba(220, 53, 69, 0.8) !important; 
        color: #333; /* Garante que o texto fique escuro em fundo claro */
    }

Â  Â  .btn-acao {
Â  Â  Â  background: none;
Â  Â  Â  border: none;
Â  Â  Â  cursor: pointer;
Â  Â  Â  color: #d9534f;
Â  Â  Â  font-weight: bold;
Â  Â  }

Â  Â  @media (min-width: 600px) {
Â  Â  Â  .resumo {
Â  Â  Â  Â  /* 3 Colunas no Desktop para melhor visualizaÃ§Ã£o */
Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  grid-template-columns: repeat(3, 1fr); 
Â  Â  Â  Â  gap: 10px;
Â  Â  Â  }
Â  Â  Â  .resumo > div:nth-last-child(2), .resumo > div:last-child {
Â  Â  Â  Â  grid-column: span 3; /* OrÃ§amento e DiferenÃ§a ocupam a linha toda */
Â  Â  Â  }
Â  Â  }
Â  </style>
</head>
<body>
Â  <div class="container">
Â  Â  <h1>ğŸ’ Controle de OrÃ§amento do Casamento ğŸ¥‚</h1>

Â  Â  <h2>Resumo Financeiro</h2>
Â  Â  <div class="resumo">
Â  Â  Â  <div class="total-box total-gasto-noivo">
Â  Â  Â  Â  JÃ¡ Gasto (Noivo): <strong id="total-pago-noivo">R$ 0,00</strong>
Â  Â  Â  </div>
Â  Â  Â  <div class="total-box total-gasto-noiva">
Â  Â  Â  Â  JÃ¡ Gasto (Noiva): <strong id="total-pago-noiva">R$ 0,00</strong>
Â  Â  Â  </div>
Â  Â  Â  <div class="total-box total-apagar-noivo">
Â  Â  Â  Â  A Pagar (Noivo): <strong id="total-apagar-noivo">R$ 0,00</strong>
Â  Â  Â  </div>
Â  Â  Â  <div class="total-box total-apagar-noiva">
Â  Â  Â  Â  A Pagar (Noiva): <strong id="total-apagar-noiva">R$ 0,00</strong>
Â  Â  Â  </div>
Â  Â  Â  <div class="total-box total-geral">
Â  Â  Â  Â  Total Gasto/Comprometido: <strong id="total-geral">R$ 0,00</strong>
Â  Â  Â  </div>
Â  Â  Â  <div class="total-box total-geral">
Â  Â  Â  Â  OrÃ§amento Planejado:
Â  Â  Â  Â  <div class="total-planejado">
Â  Â  Â  Â  Â  <strong id="orcamento-planejado">R$ 60.000,00</strong>
Â  Â  Â  Â  Â  <button id="btn-editar-orcamento">Editar</button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â  <div class="total-box total-diferenca">
Â  Â  Â  Â  DiferenÃ§a (Caixa): <strong id="total-diferenca">R$ 0,00</strong>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <h2>LanÃ§ar Novo Gasto</h2>
Â  Â  <form id="form-gasto">
Â  Â  Â  <input type="text" id="item" placeholder="Item (Ex: Buffet)" required>
Â  Â  Â  <input type="number" id="valor" placeholder="Valor (R$)" step="0.01" required>
Â  Â  Â  <select id="status" required>
Â  Â  Â  Â  <option value="" disabled selected>Status</option>
Â  Â  Â  Â  <option value="Pago">Pago</option>
Â  Â  Â  Â  <option value="A Pagar">A Pagar</option>
Â  Â  Â  </select>
      <input type="date" id="data-vencimento" placeholder="Vencimento (A Pagar)">
Â  Â  Â  <select id="responsavel" required>
Â  Â  Â  Â  <option value="" disabled selected>ResponsÃ¡vel</option>
Â  Â  Â  Â  <option value="Noivo">Noivo</option>
Â  Â  Â  Â  <option value="Noiva">Noiva</option>
Â  Â  Â  </select>
Â  Â  Â  <button type="submit">Adicionar Gasto</button>
Â  Â  </form>

Â  Â  <h2>Detalhes dos Gastos</h2>
Â  Â  <div class="tabela-container">
Â  Â  Â  <table id="tabela-gastos">
Â  Â  Â  Â  <thead>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th>Item</th>
Â  Â  Â  Â  Â  Â  <th>Valor (R$)</th>
Â  Â  Â  Â  Â  Â  <th>Status</th>
              <th>Vencimento</th>
Â  Â  Â  Â  Â  Â  <th>ResponsÃ¡vel</th>
Â  Â  Â  Â  Â  Â  <th>AÃ§Ã£o</th>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  </thead>
Â  Â  Â  Â  <tbody></tbody>
Â  Â  Â  </table>
Â  Â  </div>
Â  </div>

Â  <script>
    // Configurando data de hoje para simulaÃ§Ã£o e lÃ³gica de atraso
    const hoje = new Date();
    // Usei a data atual do sistema (2025-11-10) como referÃªncia para os exemplos:
    const dataAtrasada = '2025-10-30'; // Atrasado
    const dataPerto = '2025-11-15'; // 5 dias restantes (Alerta Amarelo)
    const dataFutura = '2026-01-20'; // Longe

Â  Â  let orcamentoTotal = 60000.00;
Â  Â  let gastos = [];
    // Adicionando dados de exemplo (incluindo datas)
    gastos.push({ item: "Buffet (Sinal)", valor: 7500.00, status: "Pago", responsavel: "Noivo" });
    gastos.push({ item: "Vestido da Noiva", valor: 8500.00, status: "A Pagar", responsavel: "Noiva", data_vencimento: dataPerto });
    gastos.push({ item: "Fotografia (Contrato)", valor: 5000.00, status: "A Pagar", responsavel: "Noivo", data_vencimento: dataFutura });
    gastos.push({ item: "DecoraÃ§Ã£o (Ãšltima Parcela)", valor: 2000.00, status: "A Pagar", responsavel: "Noiva", data_vencimento: dataAtrasada });


Â  Â  const tabelaBody = document.querySelector('#tabela-gastos tbody');
Â  Â  const totalPagoNoivo = document.getElementById('total-pago-noivo');
Â  Â  const totalPagoNoiva = document.getElementById('total-pago-noiva');
Â  Â  const totalApagarNoivo = document.getElementById('total-apagar-noivo');
Â  Â  const totalApagarNoiva = document.getElementById('total-apagar-noiva');
Â  Â  const totalGeral = document.getElementById('total-geral');
Â  Â  const orcamentoPlanejado = document.getElementById('orcamento-planejado');
Â  Â  const totalDiferencaElement = document.getElementById('total-diferenca');
Â  Â  const totalDiferencaBox = totalDiferencaElement.closest('.total-box');

Â  Â  const formGasto = document.getElementById('form-gasto');
Â  Â  const btnEditarOrcamento = document.getElementById('btn-editar-orcamento');
    const inputDataVencimento = document.getElementById('data-vencimento');


Â  Â  function formatarMoeda(valor) {
Â  Â  Â  return valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
Â  Â  }

    // FunÃ§Ã£o auxiliar para formatar a data (AAAA-MM-DD para DD/MM/AAAA)
    function formatarData(dataString) {
        if (!dataString) return '-';
        const [ano, mes, dia] = dataString.split('-');
        return `${dia}/${mes}/${ano}`;
    }

Â  Â  function atualizarTabelaEContadores() {
Â  Â  Â  let pagoNoivo = 0, pagoNoiva = 0, apagarNoivo = 0, apagarNoiva = 0;
      let totalComprometido = 0;

Â  Â  Â  // Limpa a hora da data de hoje para que a comparaÃ§Ã£o seja apenas por dia
Â  Â  Â  const hoje = new Date();
Â  Â  Â  hoje.setHours(0, 0, 0, 0); 

Â  Â  Â  tabelaBody.innerHTML = '';
Â  Â  Â  gastos.forEach((gasto, index) => {
Â  Â  Â  Â  const row = tabelaBody.insertRow();
        let dataVencimentoFormatada = '-';
        let dataEhValida = false;
        
Â  Â  Â  Â  // LÃ³gica de cÃ¡lculo dos totais
Â  Â  Â  Â  if (gasto.status === "Pago" && gasto.responsavel === "Noivo") pagoNoivo += gasto.valor;
Â  Â  Â  Â  else if (gasto.status === "Pago" && gasto.responsavel === "Noiva") pagoNoiva += gasto.valor;
Â  Â  Â  Â  else if (gasto.status === "A Pagar" && gasto.responsavel === "Noivo") apagarNoivo += gasto.valor;
Â  Â  Â  Â  else if (gasto.status === "A Pagar" && gasto.responsavel === "Noiva") apagarNoiva += gasto.valor;

        // LÃ³gica de alerta e formataÃ§Ã£o de data
        if (gasto.status === "A Pagar" && gasto.data_vencimento) {
            dataVencimentoFormatada = formatarData(gasto.data_vencimento);
            
            // Cria um objeto Date do vencimento e limpa a hora
            const vencimento = new Date(gasto.data_vencimento + 'T00:00:00');
            vencimento.setHours(0, 0, 0, 0);

            // Calcula a diferenÃ§a em dias
            const diferencaMs = vencimento - hoje;
            const diasRestantes = Math.ceil(diferencaMs / (1000 * 60 * 60 * 24)); // ms em um dia

            if (diasRestantes < 0) {
                row.classList.add('alerta-vermelho'); // Atrasado
            } else if (diasRestantes <= 7) {
                row.classList.add('alerta-amarelo'); // Menos de uma semana
            }
        }
        
        // Insere os dados na linha da tabela
Â  Â  Â  Â  row.innerHTML = `
Â  Â  Â  Â  Â  <td>${gasto.item}</td>
Â  Â  Â  Â  Â  <td>${formatarMoeda(gasto.valor)}</td>
Â  Â  Â  Â  Â  <td>${gasto.status}</td>
Â  Â  Â  Â  Â  <td>${dataVencimentoFormatada}</td>
Â  Â  Â  Â  Â  <td>${gasto.responsavel}</td>
Â  Â  Â  Â  Â  <td><button class="btn-acao" onclick="removerGasto(${index})">X</button></td>
Â  Â  Â  Â  `;
Â  Â  Â  });
      
      totalComprometido = pagoNoivo + pagoNoiva + apagarNoivo + apagarNoiva;
      let diferenca = orcamentoTotal - totalComprometido;

Â  Â  Â  totalPagoNoivo.textContent = formatarMoeda(pagoNoivo);
Â  Â  Â  totalPagoNoiva.textContent = formatarMoeda(pagoNoiva);
Â  Â  Â  totalApagarNoivo.textContent = formatarMoeda(apagarNoivo);
Â  Â  Â  totalApagarNoiva.textContent = formatarMoeda(apagarNoiva);
Â  Â  Â  totalGeral.textContent = formatarMoeda(totalComprometido);
Â  Â  Â  orcamentoPlanejado.textContent = formatarMoeda(orcamentoTotal);
      
      // Atualiza a DiferenÃ§a
      totalDiferencaElement.textContent = formatarMoeda(diferenca);
      totalDiferencaBox.classList.remove('positivo', 'negativo');
      if (diferenca >= 0) {
          totalDiferencaBox.classList.add('positivo');
      } else {
          totalDiferencaBox.classList.add('negativo');
      }
Â  Â  }

Â  Â  function removerGasto(index) {
Â  Â  Â  gastos.splice(index, 1);
Â  Â  Â  atualizarTabelaEContadores();
Â  Â  }

Â  Â  formGasto.addEventListener('submit', function(e) {
Â  Â  Â  e.preventDefault();
Â  Â  Â  const item = document.getElementById('item').value;
Â  Â  Â  const valor = parseFloat(document.getElementById('valor').value);
Â  Â  Â  const status = document.getElementById('status').value;
      const dataVencimento = inputDataVencimento.value; // Captura a nova data
Â  Â  Â  const responsavel = document.getElementById('responsavel').value;
      
      // ValidaÃ§Ã£o bÃ¡sica para pagamentos futuros com data
      if (status === "A Pagar" && !dataVencimento) {
          alert("Por favor, insira uma data de vencimento para pagamentos futuros ('A Pagar').");
          return;
      }
      
      // Cria o objeto de gasto, incluindo a data (que serÃ¡ vazia se for "Pago")
Â  Â  Â  if (item && valor > 0 && status && responsavel) {
Â  Â  Â  Â  gastos.push({ item, valor, status, responsavel, data_vencimento: dataVencimento });
Â  Â  Â  Â  atualizarTabelaEContadores();
Â  Â  Â  Â  formGasto.reset();
Â  Â  Â  }
Â  Â  });
    
    // Adiciona o evento de clique para o botÃ£o "Editar" (Mantido)
Â  Â  btnEditarOrcamento.addEventListener('click', () => {
Â  Â  Â  const novoValor = prompt("Digite o novo valor do orÃ§amento (somente nÃºmeros):", orcamentoTotal); 
Â  Â  Â  
Â  Â  Â  if (novoValor !== null) {
          const valorLimpo = novoValor.replace(',', '.');
Â  Â  Â  Â    const valorNumerico = parseFloat(valorLimpo);
          
          if (!isNaN(valorNumerico) && valorNumerico >= 0) {
Â  Â  Â  Â  Â  Â  orcamentoTotal = valorNumerico;
Â  Â  Â  Â  Â  Â  atualizarTabelaEContadores();
          } else {
              alert("Valor invÃ¡lido. Por favor, digite um nÃºmero positivo.");
          }
Â  Â  Â  }
Â  Â  });

Â  Â  // Inicializa a tabela
Â  Â  document.addEventListener('DOMContentLoaded', atualizarTabelaEContadores);
Â  </script>
</body>
</html>
